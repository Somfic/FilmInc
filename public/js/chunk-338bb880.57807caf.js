(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-338bb880"],{"13d5":function(e,t,c){"use strict";var n=c("23e7"),i=c("d58f").left,r=c("a640"),s=c("ae40"),a=c("2d00"),u=c("605d"),o=r("reduce"),d=s("reduce",{1:0}),l=!u&&a>79&&a<83;n({target:"Array",proto:!0,forced:!o||!d||l},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1dde":function(e,t,c){var n=c("d039"),i=c("b622"),r=c("2d00"),s=i("species");e.exports=function(e){return r>=51||!n((function(){var t=[],c=t.constructor={};return c[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"22f0":function(e,t,c){"use strict";c("d3b7");var n=c("d4ec"),i=c("bee2"),r=c("2ea1"),s=c("2262"),a=c("bc3a").default,u=c("a078").apiServer+"/scheduled",o={headers:{Authorization:"Bearer ".concat(r["a"].read("token"))}},d=function(){function e(){Object(n["a"])(this,e)}return Object(i["a"])(e,null,[{key:"get",value:function(){return new Promise((function(e,t){a.get(u,o).then((function(t){e(t)})).catch((function(e){Object(s["a"])(e),t(e.response)}))}))}},{key:"getOne",value:function(e){return new Promise((function(t,c){a.get(u+"/"+e,o).then((function(e){t(e)})).catch((function(e){Object(s["a"])(e),c(e.response)}))}))}},{key:"create",value:function(e){return new Promise((function(t,c){a.post(u,e,o).then((function(e){t(e)})).catch((function(e){Object(s["a"])(e),c(e.response)}))}))}},{key:"edit",value:function(e,t){return new Promise((function(c,n){a.put(u+"/"+e,t,o).then((function(e){c(e)})).catch((function(e){Object(s["a"])(e),n(e.response)}))}))}},{key:"editMany",value:function(e){return new Promise((function(t,c){a.put(u,e,o).then((function(e){t(e)})).catch((function(e){Object(s["a"])(e),c(e.response)}))}))}},{key:"delete",value:function(e){return new Promise((function(t,c){a.delete(u+"/"+e,o).then((function(e){t(e)})).catch((function(e){Object(s["a"])(e),c(e.response)}))}))}},{key:"dupe",value:function(e){return new Promise((function(t,c){a.post(u+"/"+e,null,o).then((function(e){t(e)})).catch((function(e){Object(s["a"])(e),c(e.response)}))}))}}]),e}();t["a"]=d},2532:function(e,t,c){"use strict";var n=c("23e7"),i=c("5a34"),r=c("1d80"),s=c("ab13");n({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~String(r(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},"30c3":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),i={class:"seat-selection"},r={class:"row"},s={class:"col-3"},a={class:"list-group"},u=Object(n["h"])("i",{class:"fas fa-caret-left pr-3","aria-hidden":"true"},null,-1),o=Object(n["g"])(" Terug naar tickets "),d={class:"row"},l={class:"col my-1 d-flex flex-column"},h={class:"col-auto align-self-center border-left h-100"},f={class:"badge badge-primary badge-pill"},b={key:0,class:"col-9"};function O(e,t,c,O,j,p){var v=Object(n["x"])("Navbar"),m=Object(n["x"])("router-link"),k=Object(n["x"])("SeatPlan"),g=Object(n["x"])("Footer");return Object(n["q"])(),Object(n["d"])("div",i,[Object(n["h"])(v),Object(n["h"])("div",r,[Object(n["h"])("div",s,[Object(n["h"])("div",a,[Object(n["h"])(m,{to:"/",class:"list-group-item list-group-item-action"},{default:Object(n["F"])((function(){return[u,o]})),_:1})]),(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(j.tickets,(function(e){return Object(n["q"])(),Object(n["d"])("div",{class:"list-group list-group-item-action mt-3",key:e,onClick:function(t){return p.selected(e[0].id)},"v-class":{active:"ticketGroup[0].id = selected.id"}},[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(e,(function(e){return Object(n["q"])(),Object(n["d"])("div",{class:"list-group-item",key:e},[Object(n["h"])("div",d,[Object(n["h"])("div",l,[Object(n["h"])("small",null,Object(n["z"])(e.title),1),Object(n["h"])("span",null,Object(n["z"])(e.type),1),Object(n["h"])("small",null,Object(n["z"])(e.date),1)]),Object(n["h"])("div",h,[Object(n["h"])("span",f,Object(n["z"])(e.amount),1)])])])})),128))],8,["onClick"])})),128))]),null!=j.scheduled?(Object(n["q"])(),Object(n["d"])("div",b,[Object(n["h"])(k,{scheduled:j.scheduled,totalTickets:j.totalTickets,onSeatsselected:p.seatsSelected,onDone:p.done},null,8,["scheduled","totalTickets","onSeatsselected","onDone"])])):Object(n["e"])("",!0)]),Object(n["h"])(g)])}c("4de4"),c("13d5"),c("96cf");var j=c("1da1"),p=(c("caad"),c("2532"),Object(n["I"])("data-v-699cfb17"));Object(n["t"])("data-v-699cfb17");var v={class:"seatplan"},m={class:"row d-flex align-items-baseline ml-1"},k={class:"mr-3 badge-dark rounded px-3"},g={class:"mr-3"},w=Object(n["h"])("i",{class:"fas fa-couch"},null,-1);Object(n["r"])();var y=p((function(e,t,c,i,r,s){var a=Object(n["x"])("Action");return Object(n["q"])(),Object(n["d"])("div",v,[Object(n["h"])("div",m,[Object(n["h"])("h1",k,Object(n["z"])(c.scheduled.location),1),Object(n["h"])("h1",g,Object(n["z"])(c.scheduled.watchableTitle),1),Object(n["h"])("small",null,Object(n["z"])(c.scheduled.start)+" - "+Object(n["z"])(c.scheduled.end),1)]),Object(n["h"])("div",{class:"seat-plan border rounded",style:{"grid-template-columns":"repeat("+this.scheduled.columns+", 1rem)","grid-template-rows":"repeat("+this.scheduled.rows+", 1rem)"}},[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(this.scheduled.rows*this.scheduled.columns,(function(e){return Object(n["q"])(),Object(n["d"])("div",{class:["seat",{"text-success":r.selectedPlaces.includes(e),"text-danger":c.scheduled.takenTickets.includes(e)}],key:e,onClick:function(t){return s.active(e)}},[w],10,["onClick"])})),128))],4),Object(n["h"])(a,{class:"mt-3",onExecuted:s.done,actions:r.actions},null,8,["onExecuted","actions"])])})),x=(c("4160"),c("a9e3"),c("165a")),S=c("22f0"),T={name:"Seatplan",props:{scheduled:Object,totalTickets:Number},components:{Action:x["a"]},data:function(){var e=this;return{selectedPlaces:[],scheduledEdited:{},actions:[{message:"Bevestig stoel keuze",class:"btn-dark",action:function(){return S["a"].edit(e.scheduled._id,e.scheduledEdited)}}]}},watch:{scheduled:function(){this.selectedPlaces=[]}},methods:{done:function(){this.$emit("done")},active:function(e){for(var t=this,c=[],n=0;n<this.totalTickets;n++){var i=e+n;if(i>this.scheduled.rows*this.scheduled.columns)return;if(this.scheduled.takenTickets.includes(i))return;c.push(i)}this.selectedPlaces=c,this.scheduledEdited=JSON.parse(JSON.stringify(this.scheduled)),c.forEach((function(e){t.scheduledEdited.takenTickets.push(e)}))}}};c("6211");T.render=y,T.__scopeId="data-v-699cfb17";var P=T,E=c("a18c"),z=c("2ea1"),q=c("1808"),A=c("4c03"),C={name:"SeatSelection",data:function(){return{tickets:[],scheduled:null,totalTickets:0,selectedSeats:[]}},created:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.update();case 1:case"end":return t.stop()}}),t)})))()},methods:{update:function(){var e=z["a"].readObject("tickets");this.tickets=this.groupBy(e,"id"),0==e.length&&E["a"].push("/finish")},done:function(){var e=this,t=z["a"].readObject("tickets");z["a"].writeObject("tickets",t.filter((function(t){return t.id!=e.scheduled._id}))),this.update()},seatsSelected:function(e,t){this.selectedSeats[e._id]=t},groupBy:function(e,t){return e.reduce((function(e,c){return(e[c[t]]=e[c[t]]||[]).push(c),e}),{})},selected:function(e){var t=this;this.totalTickets=this.tickets[e].reduce((function(e,t){return e+t.amount}),0),S["a"].getOne(e).then((function(e){return t.scheduled=e.data}))}},components:{SeatPlan:P,Footer:A["a"],Navbar:q["a"]}};C.render=O;t["default"]=C},"44e7":function(e,t,c){var n=c("861d"),i=c("c6b6"),r=c("b622"),s=r("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==i(e))}},"4de4":function(e,t,c){"use strict";var n=c("23e7"),i=c("b727").filter,r=c("1dde"),s=c("ae40"),a=r("filter"),u=s("filter");n({target:"Array",proto:!0,forced:!a||!u},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,c){var n=c("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},6211:function(e,t,c){"use strict";c("8b4d")},"8b4d":function(e,t,c){},ab13:function(e,t,c){var n=c("b622"),i=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(c){try{return t[i]=!1,"/./"[e](t)}catch(n){}}return!1}},caad:function(e,t,c){"use strict";var n=c("23e7"),i=c("4d64").includes,r=c("44d2"),s=c("ae40"),a=s("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!a},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},d58f:function(e,t,c){var n=c("1c0b"),i=c("7b0b"),r=c("44ad"),s=c("50c4"),a=function(e){return function(t,c,a,u){n(c);var o=i(t),d=r(o),l=s(o.length),h=e?l-1:0,f=e?-1:1;if(a<2)while(1){if(h in d){u=d[h],h+=f;break}if(h+=f,e?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:l>h;h+=f)h in d&&(u=c(u,d[h],h,o));return u}};e.exports={left:a(!1),right:a(!0)}}}]);
//# sourceMappingURL=chunk-338bb880.57807caf.js.map